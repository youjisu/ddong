

<div class="splashBox">
  <div>
    <small>신나는</small><br>
    자음게임
  </div>
</div>

<div *ngIf="this.rId!=null;then trueRid else falseRid "></div>
<ng-template #trueRid>
  <ion-header>
    <ion-toolbar>
      <div class="title"></div>
      <div class="subTitle"></div>
      <ion-grid *ngIf="qTitle==null">
        <ion-row>
          <ion-col size="6" class="ion-text-center">
            <ion-button class="guideBtn" (click)="guideAction('jStart')">게임 시작!</ion-button>
          </ion-col>
          <ion-col size="6" class="ion-text-center">
            <ion-button class="guideBtn" (click)="guideAction('guide')">도움말</ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
      <ion-title class="qBox" #qBox>
        <p class="fadeIn" *ngFor="let char of qTitle">{{char}}</p>
      </ion-title>
      <small class="fadeIn">{{qSubject}}</small>
    </ion-toolbar>
    <div class="peopleCnt"><ion-icon name="people-outline"></ion-icon> {{userCnt}}명</div>
  </ion-header>
  <ion-content scrollDownOnLoad="true">
    <div class="messageBoxBackground"></div>
    <div class="messageBox" *ngFor="let message of messages;">
      <ion-item class="guideChat" lines="none" *ngIf="message.guide">
        <ion-label>
          <div class="center">{{message.text[0]}}</div>
          <div class="center" *ngIf="message.text.length>1">{{message.text[1]}}</div>
          <div class="center" *ngIf="message.text.length>2">{{message.text[2]}}</div>
        </ion-label>
      </ion-item>
      <ion-item lines="none" *ngIf="!message.guide && !message.isMe">
        <ion-thumbnail slot="start">
          <img src="https://cdn.pixabay.com/photo/2018/05/26/18/06/dog-3431913_960_720.jpg">
        </ion-thumbnail>
        <ion-label>
          <h3>{{message.name}}</h3>
          <div class="left">
            <ion-label class="rMsg incorrect" *ngIf="message.type=='incorrect'">땡!</ion-label>
            <ion-label class="rMsg correct" *ngIf="message.type=='correct'">정답!</ion-label>
            {{message.text}}
          </div>
          <small>{{message.createdAt| date:"HH:mm"}}</small>
        </ion-label>
      </ion-item>
      <ion-item lines="none" *ngIf="message.isMe" class="me">
        <ion-thumbnail slot="start" *ngIf="!message.guide && !message.isMe">
          <img src="https://cdn.pixabay.com/photo/2018/05/26/18/06/dog-3431913_960_720.jpg">
        </ion-thumbnail>
        <ion-label>          
          <h3>{{message.name}}</h3>
          <small>{{message.createdAt| date:"HH:mm"}}</small>
          <div class="right">
            <ion-label class="rMsg incorrect" *ngIf="message.type=='incorrect'">땡!</ion-label>
            <ion-label class="rMsg correct" *ngIf="message.type=='correct'">정답!</ion-label>
            {{message.text}}
          </div>
        </ion-label>
      </ion-item>
    </div>
  </ion-content>
  <ion-footer class="bar-frosted">
    <!-- <div *ngIf="setting">
      <ion-button (click)="guideAction('guide')">도움말</ion-button>
    </div> -->
    <ion-item>
      <!-- <ion-icon name="chevron-down-circle-outline" *ngIf="setting" (click)="setting=false"></ion-icon>
      <ion-icon name="chevron-up-circle-outline" *ngIf="!setting" (click)="setting=true"></ion-icon> -->
      <ion-input [(ngModel)]="inputMessage" placeholder="" (keyup.enter)="sendChat()" #chatInput></ion-input>
      <ion-button item-right color="primary" (click)="sendChat()">Send</ion-button>
    </ion-item>
    <ion-item>
      광고가 들어갈 거에요 ~.~
    </ion-item>
  </ion-footer>
</ng-template>

<ng-template #falseRid>
  <ion-content>
    <ion-button (click)="makeRoom('jaum', 1)">혼자 하기</ion-button>
    <ion-button (click)="makeRoom(2, 8)">같이 하기</ion-button>
    <div>{{this.rId}}</div>
  </ion-content>
</ng-template>